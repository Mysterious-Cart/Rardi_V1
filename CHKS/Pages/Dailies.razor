@page "/dailies"

<PageTitle>Daily</PageTitle>
<RadzenStack>
    <RadzenRow AlignItems="AlignItems.Center" Style="margin-bottom: 25;">
        <RadzenCard>
            <RadzenStack Orientation = "Orientation.Horizontal" AlignItems = "AlignItems.Center" Gap="20px">
                <RadzenText Text="Daily Record" TextStyle = "TextStyle.H4" Style="Margin-right:15px"/>
                <RadzenText Text="Total:" TextStyle="TextStyle.Overline" style="font-size:large"/>
                <RadzenText Text="0" TextStyle = "TextStyle.DisplayH5" Style="Margin-right:15px"/>
                <RadzenText Text="Product Total:" TextStyle="TextStyle.Overline" style="font-size:large"/>
                <RadzenText Text="0" TextStyle = "TextStyle.DisplayH5" Style="Margin-right:15px"/>
                <RadzenText Text="Service Total:" TextStyle="TextStyle.Overline" style="font-size:large"/>
                <RadzenText Text="0" TextStyle = "TextStyle.DisplayH5" Style="Margin-right:15px"/>                
            </RadzenStack>
            <RadzenText Text="@Date"/>
        </RadzenCard>
    </RadzenRow>
    @if(NoEmptyImport == false)
    {
        <RadzenRow>
            <RadzenStack AlignItems="AlignItems.End" Orientation="Orientation.Horizontal" Style="Width:100%;">
                <RadzenButton Icon="priority_high" ButtonStyle="ButtonStyle.Danger" style="border-radius:5px" Click="@LoadNotImport"/>
                <RadzenText Text="Note! There are missing Import Price!" TextStyle="TextStyle.DisplayH6"/>
            </RadzenStack>
        </RadzenRow>
    }else{
        <RadzenRow>
            <RadzenStack AlignItems="AlignItems.End" Orientation="Orientation.Horizontal" Style="Width:100%;">
                <RadzenButton Icon="check" ButtonStyle="ButtonStyle.Success" style="border-radius:5px"/>
                <RadzenText Text="All data are correct. No error detected." TextStyle="TextStyle.DisplayH6"/>
            </RadzenStack>
        </RadzenRow>
    }


    <RadzenRow>
      <RadzenColumn>
        @if(changeDataMode == false){
            <RadzenCard style="height: 100%; width:100%;">
                <RadzenDataGrid @ref="grid0" ColumnWidth="200px"   AllowFiltering="true" FilterMode="FilterMode.Advanced" AllowPaging="true" AllowSorting="true" ShowPagingSummary="true" PageSizeOptions=@(new int[]{5, 10, 20, 30})
                    Data="@History" TItem="CHKS.Models.mydb.History" RowSelect="@OpenHistory">
                    <Columns>
                        <RadzenDataGridColumn TItem="CHKS.Models.mydb.History" Property="CashoutDate" Title="ថ្ងៃទី">
                        </RadzenDataGridColumn>
                        <RadzenDataGridColumn TItem="CHKS.Models.mydb.History" Property="Plate" Title="ផ្លាកលេខ">
                        </RadzenDataGridColumn>
                        <RadzenDataGridColumn TItem="CHKS.Models.mydb.History" Property="Total" Title="សរុប">
                        </RadzenDataGridColumn>
                    </Columns>

                </RadzenDataGrid>
            </RadzenCard>
        }else{
    <RadzenDataGrid @ref="grid1" ColumnWidth="200px" AllowFiltering="false" AllowPaging="false" AllowSorting="true" PageSizeOptions=@(new int[]{5, 10, 20, 30})
     Data="@Historyconnectors" TItem="CHKS.Models.mydb.Historyconnector" GridLines="Radzen.DataGridGridLines.None" >
     <Columns>
        <RadzenDataGridColumn TItem="CHKS.Models.mydb.Historyconnector" Property="Product" Title="Name">
        </RadzenDataGridColumn>
    <RadzenDataGridColumn TItem="CHKS.Models.mydb.Historyconnector" Property="Qty" Title="Qty">

        </RadzenDataGridColumn>
        <RadzenDataGridColumn TItem="CHKS.Models.mydb.Historyconnector" Property="Inventory.Import" Title="Import">
            <EditTemplate Context="Historyconnector">
                <RadzenNumeric style="display: block; width: 100%" @bind-Value="@Inventories.Import" Name="Import" />
            </EditTemplate>
        </RadzenDataGridColumn>
        <RadzenDataGridColumn TItem="CHKS.Models.mydb.Historyconnector" Property="Inventory.Export" Title="Export">
            <EditTemplate Context="Historyconnector">
                <RadzenNumeric style="display: block; width: 100%" @bind-Value="@Inventories.Export" Name="Export" />
            </EditTemplate>
        </RadzenDataGridColumn>
        <RadzenDataGridColumn>
            <EditTemplate Context = "Historyconnector">
                <RadzenButton Icon="check" ButtonStyle="ButtonStyle.Success" Variant="Variant.Flat" Size="ButtonSize.Medium"
                    style="margin-top: 0.25rem; margin-right: 0.25rem; margin-bottom: 0.25rem"
                    Click=@(args => SaveButtonClick(args, Historyconnector)) @onclick:stopPropagation="true" />
                <RadzenButton Icon="close" ButtonStyle="ButtonStyle.Light" Variant="Variant.Flat" Size="ButtonSize.Medium"
                    Click=@(args => CancelButtonClick(args, Historyconnector)) @onclick:stopPropagation="true" />
            </EditTemplate>
            <Template Context="Historyconnector">
                <RadzenButton Icon="edit" ButtonStyle="ButtonStyle.Light" Variant="Variant.Flat" Size="ButtonSize.Medium"
                    style="margin-top: 0.25rem; margin-right: 0.25rem; margin-bottom: 0.25rem"
                    Click=@(args => EditButtonClick(args, Historyconnector)) @onclick:stopPropagation="true" />
            </Template>
        </RadzenDataGridColumn>
        
     </Columns>
    </RadzenDataGrid>
        }
        </RadzenColumn>
    </RadzenRow>
</RadzenStack>
