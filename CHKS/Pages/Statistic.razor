@page "/statistic"

<PageTitle>Statistic</PageTitle>
<RadzenRow>
    <RadzenCard>
        <RadzenStack Orientation = "Orientation.Horizontal" AlignItems = "AlignItems.Center" Gap="20px">
            <RadzenText Text="Monthly Statistic" TextStyle = "TextStyle.H4" Style="Margin-right:15px"/>
            <RadzenText Text="Total:" TextStyle="TextStyle.Overline" style="font-size:large"/>
            <RadzenText Text="@Math.Round(@Total.GetValueOrDefault(),2).ToString()" TextStyle = "TextStyle.DisplayH5" Style="Margin-right:15px"/>
            <RadzenText Text="Product Total:" TextStyle="TextStyle.Overline" style="font-size:large"/>
            <RadzenText Text="@Math.Round(@ProductTotal.GetValueOrDefault(),2).ToString()"  TextStyle = "TextStyle.DisplayH5" Style="Margin-right:15px"/>
            <RadzenText Text="Service Total:" TextStyle="TextStyle.Overline" style="font-size:large"/>
            <RadzenText Text="@Math.Round(@ServiceTotal.GetValueOrDefault(),2).ToString()"  TextStyle = "TextStyle.DisplayH5" Style="Margin-right:15px"/>                
        </RadzenStack>
    </RadzenCard>
</RadzenRow>

<RadzenRow Style="Margin-top:20px;">
    <RadzenCard style="Width:fit-content">
        <RadzenStack>
            <RadzenStack Orientation="Orientation.Horizontal" Gap="10px" AlignItems="AlignItems.Center" >
                <RadzenLabel Text="From" Component="From"/>
                <RadzenDatePicker @bind-Value="@TimeStart" InitialViewDate="@DateTime.Now" Name="From" DateFormat="dd/MM/yyyy" Max="@DateTime.Now" Change="@GetHistoryBaseOfChoosenDate"/>
                <RadzenLabel Text="To" Component="To"/>
                <RadzenDatePicker @bind-Value="@TimeEnd" InitialViewDate="@DateTime.Now" Name="To" DateFormat="dd/MM/yyyy" Max="@DateTime.Now" Change="@GetHistoryBaseOfChoosenDate"/>
            </RadzenStack>

            
        </RadzenStack>
    </RadzenCard>
</RadzenRow>

<RadzenRow style="margin-top:20px">

        <RadzenDataGrid Width="210px" AllowFiltering="true" FilterMode="FilterMode.Advanced" AllowPaging="true" AllowSorting="true" @ref="@grid1" TItem ="Models.mydb.History" Data ="@Histories" Style="height: 60vh; width:50%">
            <Columns>
                <RadzenDataGridColumn title="Date" TItem ="Models.mydb.History" Property="CashoutDate"></RadzenDataGridColumn>
                <RadzenDataGridColumn title="Plate" TItem ="Models.mydb.History" Property="Plate"></RadzenDataGridColumn>
                <RadzenDataGridColumn title="Total" TItem ="Models.mydb.History" Property="Total"></RadzenDataGridColumn>
            </Columns>
        </RadzenDataGrid>
</RadzenRow>
